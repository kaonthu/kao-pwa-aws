<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>API æ¸¬è©¦æ§åˆ¶å°ï½œKAO-YU-HSIANG</title>

  
  <!-- å…±ç”¨æ¨£å¼ -->
  <link href="/static/css/style.css" rel="stylesheet">

  <!-- å¤–éƒ¨å¥—ä»¶ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body>
  <div id="header"></div>

  <main id="main" class="container">
    <div class="text-center mb-5">
      <h1>ğŸ§ª API æ¸¬è©¦æ§åˆ¶å°</h1>
      <p class="text-muted">å¿«é€Ÿæ¸¬è©¦ Lambda API èˆ‡å…¬å…± API çš„å›å‚³çµæœã€‚</p>
    </div>

    <!-- Lambda æ¸¬è©¦ -->
    <div class="section-title">âš™ï¸ ä¸€ã€Lambda API æ¸¬è©¦</div>

    <p>ç›®æ¨™ç«¯é»ï¼š</p>
    <pre><code>
    https://4b5cqz0xpd.execute-api.ap-northeast-1.amazonaws.com/Prod/hello
    https://4b5cqz0xpd.execute-api.ap-northeast-1.amazonaws.com/Prod/test
    </code></pre>

    <!-- å…©å€‹ Lambda æ¸¬è©¦æŒ‰éˆ• -->
    <div class="d-flex flex-wrap gap-2">
      <button id="btnHello" class="btn btn-primary">
        <i class="fa-solid fa-cloud-arrow-down"></i> å‘¼å« /hello
      </button>
      <button id="btnTest" class="btn btn-success">
        <i class="fa-solid fa-vial"></i> å‘¼å« /test
      </button>
    </div>

    <!-- çµæœé¡¯ç¤º -->
    <div id="helloResult" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦ /hello</div>
    <div id="testResult" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦ /test</div>

    <!-- å…¬å…± API æ¸¬è©¦ -->
    <div class="section-title">ğŸŒ äºŒã€å…¬å…± API æ¸¬è©¦</div>
    <p>ç¤ºç¯„ç«¯é»ï¼ˆJSONPlaceholder æ¸¬è©¦ APIï¼‰ï¼š</p>
    <pre><code>https://jsonplaceholder.typicode.com/todos/1</code></pre>

    <button id="btnPublic"><i class="fa-solid fa-globe"></i> å‘¼å«å…¬å…± API</button>
    <div id="publicResult" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦</div>

    <!-- âš¡ EC2 Flask æ¸¬è©¦ -->
    <div class="section-title">âš¡ ä¸‰ã€EC2 Flask API æ¸¬è©¦</div>
    <p>ç›®å‰éƒ¨ç½²çš„ Flask API ç«¯é»ï¼š</p>
    <pre><code>http://18.176.60.86:5000/</code></pre>

    <button id="btnEC2" class="btn btn-warning text-dark">
      <i class="fa-solid fa-server"></i> å‘¼å« EC2 Flask API
    </button>
    <div id="ec2Result" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦ EC2 Flask</div>

    <!-- ğŸ§© å››ã€EC2 Gunicorn + Nginx æ¸¬è©¦ -->
    <div class="section-title">ğŸ§© å››ã€EC2 Gunicorn + Nginx æ¸¬è©¦</div>
    <p>ç›®å‰æ­£å¼éƒ¨ç½²çš„ API ç«¯é»ï¼ˆNginx åå‘ä»£ç†è‡³ Gunicornï¼‰ï¼š</p>
    <pre><code>http://18.176.60.86/
    http://18.176.60.86/status</code></pre>

    <div class="d-flex flex-wrap gap-2">
      <button id="btnGunicornRoot" class="btn btn-info text-white">
        <i class="fa-solid fa-plug"></i> å‘¼å« /
      </button>
      <button id="btnGunicornStatus" class="btn btn-secondary">
        <i class="fa-solid fa-circle-info"></i> å‘¼å« /status
      </button>
    </div>

    <div id="gunicornRootResult" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦ /</div>
    <div id="gunicornStatusResult" class="result-block mt-3">ğŸ•“ å°šæœªæ¸¬è©¦ /status</div>

    <!-- æ›´æ–°æ—¥æœŸ -->
    <p class="text-muted mt-5">ğŸ“… æ›´æ–°æ—¥æœŸï¼š2025-11-06</p>
  </main>

  <div id="footer"></div>
  <script src="/static/js/layout.js"></script>
  <script src="/static/js/api_gunicorn.js"></script>

  <script>
    const apiBase = "https://4b5cqz0xpd.execute-api.ap-northeast-1.amazonaws.com/Prod";
    const lambdaHello = `${apiBase}/hello`;
    const lambdaTest  = `${apiBase}/test`;
    const publicUrl   = "https://jsonplaceholder.typicode.com/todos/1";
    const ec2Url      = "http://18.176.60.86:5000/";

    async function callAPI(url, targetId) {
      const box = document.getElementById(targetId);
      box.textContent = `ğŸš€ æ­£åœ¨å‘¼å«ï¼š${url}`;
      try {
        const res = await fetch(url, { mode: "cors" });
        const text = await res.text();
        try {
          const json = JSON.parse(text);
          box.textContent = JSON.stringify(json, null, 2);
        } catch {
          box.textContent = text;
        }
      } catch (err) {
        box.textContent = "âŒ ç™¼ç”ŸéŒ¯èª¤ï¼š" + err;
      }
    }

    // ç¶å®šæŒ‰éˆ•äº‹ä»¶
    document.getElementById("btnHello").addEventListener("click", () => callAPI(lambdaHello, "helloResult"));
    document.getElementById("btnTest").addEventListener("click", () => callAPI(lambdaTest, "testResult"));
    document.getElementById("btnPublic").addEventListener("click", () => callAPI(publicUrl, "publicResult"));
    document.getElementById("btnEC2").addEventListener("click", () => callAPI(ec2Url, "ec2Result"));
  </script>

</body>
</html>
