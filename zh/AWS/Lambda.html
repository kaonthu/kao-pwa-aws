<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lambda ç­†è¨˜ï½œKAO-YU-HSIANG</title>

  <!-- å…±ç”¨æ¨£å¼ -->
  <link href="/static/css/style.css" rel="stylesheet">

  <!-- å¤–éƒ¨å¥—ä»¶ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
  <div id="header"></div>

  <main id="main" class="container">
    <div class="text-center mb-5">
      <h1>ç³»çµ±æ¶æ§‹èˆ‡ Lambda ç­†è¨˜</h1>
      <p class="text-muted">
        æœ¬é è¨˜éŒ„ä»¥ SAM å»ºç«‹/æœ¬åœ°æ¨¡æ“¬/éƒ¨ç½² Lambdaï¼Œä¸¦èˆ‡ API Gateway ä¸²æ¥çš„æµç¨‹èˆ‡é‡é»ã€‚<br>
        ç›®å‰å‡½æ•¸ï¼ˆä¸»æ§å°ï¼‰ï¼š<code>hello-lambda-new-world-HelloWorldFunction</code>ï¼ˆPython 3.12ï¼‰
      </p>
    </div>

    <!-- ç›®çš„ -->
    <div class="section-title">ğŸ¯ ç›®çš„</div>
    <p>
      åœ¨æœ¬åœ°ç«¯æ¨¡æ“¬ Lambda + API Gateway çš„é‹ä½œï¼Œå®Œæˆé–‹ç™¼èˆ‡æ¸¬è©¦å¾Œå†éƒ¨ç½²åˆ°é›²ç«¯ã€‚
    </p>

    <!-- é–‹ç™¼ç›®æ¨™ -->
    <div class="section-title">ğŸ§© ä¸€ã€é–‹ç™¼ç›®æ¨™</div>
    <p>å»ºç«‹ä¸€å€‹ç°¡å–® APIï¼ˆ/helloï¼‰ï¼Œå›å‚³ï¼š</p>
    <pre><code>{"message": "hello world"}</code></pre>

    <!-- åŸºæœ¬æ¦‚å¿µ -->
    <div class="section-title">ğŸ“˜ äºŒã€åŸºæœ¬æ¦‚å¿µ</div>
    <ul>
      <li><b>Lambdaï¼š</b> äº‹ä»¶è§¸ç™¼çš„é‹è¡Œç’°å¢ƒï¼Œå…ç¶­é‹ä¸»æ©Ÿã€‚</li>
      <li><b>API Gatewayï¼š</b> å°å¤–æä¾› HTTP å…¥å£ï¼Œæ•´åˆ Lambdaã€‚</li>
      <li><b>SAMï¼š</b> åŸºæ–¼ CloudFormation çš„ Serverless å°ˆæ¡ˆè…³æ‰‹æ¶ï¼Œå¯æœ¬åœ°æ¨¡æ“¬/éƒ¨ç½²ã€‚</li>
    </ul>

    <!-- æœ¬åœ°é–‹ç™¼ -->
    <div class="section-title">ğŸ§± ä¸‰ã€æœ¬åœ°é–‹ç™¼æµç¨‹ï¼ˆSAMï¼‰</div>
    <pre><code>sam init             # å»ºç«‹ç¯„ä¾‹å°ˆæ¡ˆï¼ˆé¸ Hello World / Python3.12ï¼‰
cd hello-lambda-new-world
sam build
sam local start-api --skip-pull-image
# æ¸¬è©¦ï¼šhttp://127.0.0.1:3000/hello</code></pre>
    <p>é æœŸå›å‚³ï¼š<code>{"message": "hello world"}</code></p>

    <!-- é›²ç«¯éƒ¨ç½² -->
    <div class="section-title">â˜ï¸ å››ã€é›²ç«¯éƒ¨ç½²æµç¨‹</div>
    <pre><code>sam deploy --guided</code></pre>
    <ul>
      <li>å»ºç«‹/æ›´æ–°ï¼šLambda Functionã€API Gatewayã€IAM Roleã€CloudFormation Stackã€‚</li>
      <li>å®Œæˆè¨Šæ¯ï¼ˆç¯„ä¾‹ï¼‰ï¼š<code>Successfully created/updated stack - hello-lambda-new-world in ap-northeast-1</code></li>
      <li>ç«¯é»ï¼ˆç¯„ä¾‹ï¼‰ï¼š<code>https://xq1nikjgl5.execute-api.ap-northeast-1.amazonaws.com/Prod/hello</code></li>
    </ul>

    <!-- å¸¸è¦‹å•é¡Œ -->
    <div class="section-title">ğŸš¨ äº”ã€å¸¸è¦‹å•é¡Œ</div>
    <ul>
      <li><b>Missing Authentication Token</b>ï¼šè·¯å¾‘éŒ¯èª¤ â†’ ç¢ºèª <code>/hello</code>ã€Stage èˆ‡æ–¹æ³•ã€‚</li>
      <li><b>Binary validation failed</b>ï¼šRuntime ä¸ç¬¦ â†’ èª¿æ•´ <code>template.yaml</code> ç‚º <code>python3.12</code>ã€‚</li>
      <li><b>AccessDenied</b>ï¼šæ¬Šé™ä¸è¶³ â†’ æª¢æŸ¥ AWS CLI è¨­å®šæª”èˆ‡ IAM Policyã€‚</li>
    </ul>

    <!-- é‡é»æ‘˜è¦ -->
    <div class="section-title">ğŸ”§ å…­ã€é‡é»æ‘˜è¦</div>
    <ul>
      <li><code>sam build</code>ï¼šå»ºæ§‹ä¾è³´</li>
      <li><code>sam local start-api</code>ï¼šæœ¬åœ°å•Ÿå‹• API æ¨¡æ“¬</li>
      <li><code>sam deploy</code>ï¼šéƒ¨ç½²è‡³é›²ç«¯</li>
      <li>Lambda ç‚ºçŸ­æš«åŸ·è¡Œç’°å¢ƒï¼Œç„¡éœ€ç¶­é‹ä¸»æ©Ÿ</li>
    </ul>

    <!-- CORS -->
    <div class="section-title">ğŸŒ ä¸ƒã€CORS å•é¡Œèˆ‡è§£æ±ºï¼ˆ2025/11/05ï¼‰</div>
    <p>å‰ç«¯ï¼ˆS3 ç¶²ç«™ï¼‰ä»¥ <code>fetch()</code> å‘¼å«æ™‚éœ€å›æ‡‰ CORS Headerï¼ˆSAM çš„ <code>Cors</code> åœ¨è‡ªå®šç¾© <code>RestApiId</code> æ™‚å¯èƒ½ç„¡æ•ˆï¼‰ï¼š</p>
    <div class="code-wrap">
      <div class="code-title">Lambda å›å‚³ï¼ˆå« CORSï¼‰</div>
      <pre class="pretty-code"><code>return {
  "statusCode": 200,
  "headers": {
    "Access-Control-Allow-Origin": "*",
    "Access-Control-Allow-Headers": "*",
    "Access-Control-Allow-Methods": "GET,POST,OPTIONS"
  },
  "body": json.dumps({"message": "hello world"})
}</code></pre>
    </div>

    <!-- é™„éŒ„ï¼šä¸»æ§å°å°ç…§ -->
    <div class="section-title">ğŸ“ å…«ã€ä¸»æ§å°å°ç…§ï¼ˆç›®å‰ç‹€æ…‹æ‘˜è¦ï¼‰</div>
    <ul>
      <li>Lambda å‡½æ•¸ï¼š
        <ul>
          <li><code>hello-lambda-new-world-HelloWorldFunction</code>ï¼ˆPython 3.12ï¼‰</li>
          <li><code>hello-lambda-HelloWorldFunction</code>ï¼ˆPython 3.10ï¼‰</li>
          <li><code>flask-app-FlaskFunction</code>ï¼ˆPython 3.10ï¼‰</li>
        </ul>
      </li>
      <li>API Gatewayï¼š<code>hello-lambda-new-world</code>ï¼ˆè³‡æºï¼š<code>/</code>ã€<code>/hello</code>ï¼›æ–¹æ³•ï¼š<code>GET</code>/<code>OPTIONS</code>ï¼‰</li>
    </ul>

    <p class="text-muted mt-4">ğŸ“… æ›´æ–°æ—¥æœŸï¼š2025-11-06</p>
  </main>

  <div id="footer"></div>
  <script src="/static/js/layout.js"></script>
</body>
</html>
